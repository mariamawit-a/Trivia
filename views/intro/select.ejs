<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<%- include('../partials/header') %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


<%
var imgArray = new Array();
imgArray[0] = 'https://imagizer.imageshack.com/v2/150x100q90/923/RNgUKF.png';
imgArray[1] = 'https://imagizer.imageshack.com/v2/150x100q90/922/JDtPWi.png';
imgArray[2] = 'https://imagizer.imageshack.com/v2/150x100q90/923/gjuapd.png';
imgArray[3] = 'https://imagizer.imageshack.com/v2/150x100q90/924/4eNvyr.png';
imgArray[4] = 'https://imagizer.imageshack.com/v2/150x100q90/924/oeMz0Y.png';
imgArray[5] = 'https://imagizer.imageshack.com/v2/150x100q90/922/60quUp.png';
imgArray[6] = 'https://imagizer.imageshack.com/v2/150x100q90/924/rZipYC.png';
imgArray[7] = 'https://imagizer.imageshack.com/v2/150x100q90/924/34FDV0.jpg';
imgArray[8] = 'https://imagizer.imageshack.com/v2/150x100q90/922/NlK0Kt.png';
imgArray[9] = 'https://imagizer.imageshack.com/v2/150x100q90/923/D2yF6k.png';
imgArray[10] = 'https://imagizer.imageshack.com/v2/150x100q90/922/BkcURh.png';
imgArray[11] = 'https://imagizer.imageshack.com/v2/150x100q90/923/eoaB7b.png';
imgArray[12] = 'https://imagizer.imageshack.com/v2/150x100q90/922/CTGlf0.png';
imgArray[13] = 'https://imagizer.imageshack.com/v2/150x100q90/924/F3MUUx.jpg';
imgArray[14] = 'https://imagizer.imageshack.com/v2/150x100q90/922/nyE0oM.png';
imgArray[15] = 'https://imagizer.imageshack.com/v2/150x100q90/923/ndYZDG.png';
imgArray[16] = 'https://imagizer.imageshack.com/v2/150x100q90/924/1ZJh77.png';
imgArray[17] = 'https://imagizer.imageshack.com/v2/150x100q90/923/sBFb7h.png';
imgArray[18] = 'https://imagizer.imageshack.com/v2/150x100q90/922/LIFyax.png';
imgArray[19] = 'https://imagizer.imageshack.com/v2/150x100q90/924/OkzzK3.png';
imgArray[20] = 'https://imagizer.imageshack.com/v2/150x100q90/923/iCLhEd.png';
imgArray[21] = 'https://imagizer.imageshack.com/v2/150x100q90/924/XtVD1W.png';
imgArray[22] = 'https://imagizer.imageshack.com/v2/150x100q90/922/shRbbA.png';
imgArray[23] = 'https://imagizer.imageshack.com/v2/150x100q90/923/P8DCWW.png';
%>  

<div class="navbar"> 
    <a href='/home' class="back">
        <i class="fa fa-angle-left"></i>
    </a>
    <div class="menu">
        <h1>PARTY OF ONE</h1>
    </div>
</div>
<div id="category-page">
    <div id="categories">
    <% categories.forEach((category, index) => { %>
            <div onclick="location.href = '/games/<%= category.id %>'" class="category">
                <img src= <%- imgArray[index] %> />
                <p><%- category.name %></p>
            </div>
    <% }) %> 
    </div>
    <div id="settings">
      <button type="button" class="setting" data-toggle="modal" data-target="#instruction"><img src="https://imagizer.imageshack.com/img923/6177/zFrSwg.png"/></button>
      <button type="button" class="setting" data-toggle="modal" data-target="#profile"><img id="useravatar"src="https://imagizer.imageshack.com/v2/100x150q90/922/1gOV5O.png"></button>

    </div>
  
      <!-- Modals begin-->
      <div class="modal fade" id="instruction" role="dialog">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">INSTRUCTIONS</h4>
            </div>
            <div class="modal-body">
              <h4>Chill Mode</h4>
                <p>
                  We all need to chill sometimes. Chill Mode is where time doesn't matter and wrong answers don't cost you a point! Choose from the list of catagories. Attempt 10 questions. When you feel like it is time to reveal the right answers, click the show button. Reward yourself if you had it right, and if not, hey you learned something new today!
                </p>
              <h4>Party of One</h4>
              <p>
                Are you up for some challenge? Then you should join a Part of One! Choose from a list of catagories. Attempt to answer 20 question within three minute. And see if you can beat your previous scores. If you finish before time ends, you can hit the submit button as the same scores are differed by the time taken.   
              </p>
              <h4>Join the Party (Coming soon!)</h4>
              <p>
                Some alone time is good, but a party is never a party without the guests. Join some friends for a live trivia night and keep the party going!
              </p>
            </div>
            <!-- <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div> -->
          </div>
          
        </div>
      </div>
  
      <div class="modal fade" id="profile" role="dialog">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title" id="user">Welcome User!</h4>
            </div>
            <div class="modal-body">
  
              <table>
                <tr>
                  <th>Score (Max 20)</th>
                  <th>Time Taken</th>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                <tr class="table-scores">
                  <td>-</td>
                  <td>-</td>
                </tr>
                
              </table>
  
            </div>
            <div class="modal-footer">
              <button type="button" id="reset" onclick="reset()">Reset Game</button>
            </div>
          </div>
          
        </div>
      </div>
    <!-- Modals end -->
  
    </div>
  
    <script>
      
      document.getElementById('useravatar').setAttribute('src', localStorage.getItem('avatar'));
      document.getElementById('user').innerText= "Welcome "+localStorage.getItem('user')+"!";
  
      Storage.prototype.getObj = function(key) {
        return JSON.parse(this.getItem(key))
      }
  
      for(let index=0; index<localStorage.getObj('scores').length; ++index) {
        console.log(index);
        document.getElementsByClassName('table-scores')[index].children[0].innerText = localStorage.getObj('scores')[index];
        document.getElementsByClassName('table-scores')[index].children[1].innerText = localStorage.getObj('times')[index];  
      }
  
      function reset(){
        localStorage.clear();
        location.href='/';
      }
  
    </script>
<%- include('../partials/footer') %>